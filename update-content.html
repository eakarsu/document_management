<!DOCTYPE html>
<html>
<head>
    <title>Update Document Content</title>
</head>
<body>
    <h1>Update Document Content</h1>
    <p>Open browser console to see results</p>
    
    <script>
        // This script will update document content when loaded in browser
        async function updateDocumentContent() {
            const documentId = 'cmf05xtwa0001nrfblq3vy1lj';
            
            const richContent = `
                <h1>Air Force Technical Manual - AFM 2024-001</h1>
                <h2>Chapter 1: Introduction</h2>
                <p>This document provides <strong>comprehensive guidance</strong> for Air Force personnel regarding operational procedures and best practices.</p>
                
                <h3>1.1 Purpose</h3>
                <p>The purpose of this manual is to establish standardized procedures across all Air Force installations. This ensures:</p>
                <ul>
                    <li>Consistency in operations</li>
                    <li>Safety compliance</li>
                    <li>Operational excellence</li>
                </ul>
                
                <h3>1.2 Scope</h3>
                <p>This manual applies to all active duty, reserve, and guard personnel involved in:</p>
                <ol>
                    <li>Flight operations</li>
                    <li>Maintenance procedures</li>
                    <li>Safety protocols</li>
                    <li>Emergency response</li>
                </ol>
                
                <h2>Chapter 2: Safety Procedures</h2>
                <p><strong>Safety is paramount</strong> in all Air Force operations. Personnel must adhere to the following guidelines:</p>
                
                <table>
                    <tr>
                        <th>Risk Level</th>
                        <th>Response Protocol</th>
                        <th>Authorization Required</th>
                    </tr>
                    <tr>
                        <td>Low</td>
                        <td>Standard procedures</td>
                        <td>Supervisor</td>
                    </tr>
                    <tr>
                        <td>Medium</td>
                        <td>Enhanced safety measures</td>
                        <td>Flight Chief</td>
                    </tr>
                    <tr>
                        <td>High</td>
                        <td>Special protocols</td>
                        <td>Commander</td>
                    </tr>
                </table>
                
                <blockquote>
                    <p>"Excellence in all we do" - This core value drives our commitment to safety.</p>
                </blockquote>
                
                <p><em>Last updated: ${new Date().toLocaleDateString()}</em></p>
            `;
            
            try {
                // Get token from localStorage
                const token = localStorage.getItem('accessToken');
                if (!token) {
                    console.error('No access token found. Please login first.');
                    return;
                }
                
                // Save content using the editor save endpoint
                const response = await fetch(`http://localhost:3003/api/editor/documents/${documentId}/save`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    credentials: 'include',
                    body: JSON.stringify({
                        content: richContent,
                        title: 'Air Force Technical Manual - AFM 2024-001'
                    })
                });
                
                const data = await response.json();
                console.log('Update response:', data);
                
                if (data.success) {
                    console.log('✅ Document content updated successfully!');
                    console.log('Now reload the editor page to see the new content.');
                } else {
                    console.error('❌ Failed to update:', data.error);
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }
        
        // Run the update
        console.log('Updating document content...');
        updateDocumentContent();
    </script>
</body>
</html>